<div class="modal" role="dialog">
  <div class="modal-dialog">

    <div class="modal-content">

      <div class="modal-header">
        <h3 class="modal-title">{{'user edit form' | translate}}</h3>
      </div>

      <div class="modal-body">
        <form name="frm">

          <div class="form-group has-feedback"
            ng-show="item.id == undefined"
            ng-class="{'has-error': frm.username.$invalid, 'has-success': frm.username.$valid}">
            <label class="control-label" for="username">{{'user name' | translate}}</label>
            <input name="username" type="text" class="form-control"
              ng-model="item.username"
              ng-required="item.id == undefined" ng-minlength=5 ng-maxlength=18 data-unique="username"
              ng-pattern="/^[0-9a-zA-Z]*$/">
            <span class="glyphicon form-control-feedback"
              ng-class="{'glyphicon-ok': frm.username.$valid, 'glyphicon-remove': frm.username.$invalid}">
            </span>
            <div class="error-container" ng-show="frm.username.$invalid">
              <small class="text-danger" ng-show="frm.username.$error.required">{{'please input a user' | translate}}</small>
              <small class="text-danger" ng-show="frm.username.$error.pattern">{{'use only letters and numbers' | translate}}</small>
              <small class="text-danger" ng-show="frm.username.$error.minlength">{{'username must be at least 5 characters' | translate}}</small>
              <small class="text-danger" ng-show="frm.username.$error.maxlength">{{'username name cannot be longer than 20 characters' | translate}}</small>
              <small class="text-danger" ng-show="frm.username.$error.unique">{{'username already present' | translate}}</small>
            </div>
          </div>

          <div class="form-group has-feedback" ng-class="{'has-error': frm.name.$invalid, 'has-success': frm.name.$valid}">
            <label class="control-label" for="name">{{'full name' | translate}}</label>
            <input name="name" type="text" class="form-control" ng-model="item.realname" ng-maxlength=32 required placeholder="Name">
            <span class="glyphicon form-control-feedback" ng-class="{'glyphicon-ok': frm.name.$valid, 'glyphicon-remove': frm.name.$invalid}"></span>
            <div class="error-container" ng-show="frm.name.$invalid">
              <small class="text-danger" ng-show="frm.name.$error.required">{{'please input full name' | translate}}</small>
              <small class="text-danger" ng-show="frm.name.$error.maxlength">{{'name cannot be longer than 32 characters' | translate}}</small>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label" for="email">{{'email' | translate}}</label>

            <input type="email" name="email" class="form-control"
              data-ng-validator="email" ng-model="item.email">

            <div class="error-container" ng-show="frm.email.$invalid">
              <small class="text-danger" ng-show="frm.email.$error.email">
                {{'email is invalid' | translate}}
              </small>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label" for="password">{{'password' | translate}}</label>

            <input type="password" name="passwd" class="form-control"
              ng-required="item.id == undefined" ng-model="item.password">

            <div class="error-container" ng-show="frm.passwd.$invalid">
              <small class="text-danger" ng-show="frm.passwd.$error.required">
                {{'password is required' | translate}}
              </small>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">

              <div class="form-group">
                <label class="control-label">{{'primary group' | translate}}</label>
                <select class="form-control" ng-model="item.gid"
                  ng-options="g.id as g.name for g in groups"></select>
              </div>

            </div>

            <div class="col-md-6">

              <div class="form-group">
                <label class="control-label">{{'other groups' | translate}}</label>

                <select multiple class="form-control" ng-model="item.groups"
                  ng-options="g.id as g.name for g in groups"></select>
              </div>

            </div>
          </div>


        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="frm.$invalid" ng-click="save();">ok</button>
        <button class="btn btn-default" ng-click="$hide();">cancel</button>
      </div>
    </div>
  </div>
</div>
